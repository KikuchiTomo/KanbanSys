!function(){return function e(a,n,t){function d(r,i){if(!n[r]){if(!a[r]){var o="function"==typeof require&&require;if(!i&&o)return o(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[r]={exports:{}};a[r][0].call(c.exports,function(e){return d(a[r][1][e]||e)},c,c.exports,e,a,n,t)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<t.length;r++)d(t[r]);return d}}()({1:[function(e,a,n){!function(){this.KanbanSys=function(e){var a=this;this.menus=[],this.menus_num=0,this.x=0,this.y=0,this.h=0,this.addCardButtonDidPush=function(e,a){},this.deleteButtonDidPush=function(e,a){},this.editBoardNameButtonDidPush=function(e,a){},this.config=e,this.assembler=void 0,this.__assemblerType0=function(e){var a=[];return void 0===e||null===e||void 0===e.length?a:(e.forEach(e=>{var n=document.createElement("div");n.id=e.id;var t=document.createElement("div");t.classList.add("title"),t.innerHTML=e.title,t.dataset.title=e.title;var d=document.createElement("div");d.innerHTML=e.person,d.dataset.person=e.person,d.classList.add("person"),n.appendChild(t),n.appendChild(d),a.push(n)}),a)},this.__assemblerType1=function(e){var a=[];return void 0===e||null===e||void 0===e.length?a:(e.forEach(e=>{var n=document.createElement("a");n.href=e.issueUrl,n.id=e.id,n.classList.add("issueLink");var t=document.createElement("div");t.classList.add("issueTitle"),t.innerHTML=e.issueTitle,t.dataset.issueTitle=e.issueTitle;var d=document.createElement("img");d.classList.add("issueIcon"),d.src=e.issueIconSrc;var s=document.createElement("div");s.classList.add("issueDate"),s.innerHTML=e.issueDate;var r=document.createElement("div");r.classList.add("issuePerson"),r.innerHTML=e.issuePerson;var i=document.createElement("img");i.classList.add("issuePersonIcon"),i.src=e.issuePersonIconSrc;var o=document.createElement("div");o.classList.add("issueTagContainer"),e.issueTags.forEach(e=>{var a=document.createElement("div");a.style.background=e.background||"white",a.style.color=e.color||"black",a.innerHTML=e.tag,a.classList.add("issueTags"),a.style.borderColor=e.color,o.appendChild(a)});var l=document.createElement("div");l.classList.add("issueTitleContainer"),l.appendChild(d),l.appendChild(t);var c=document.createElement("div");c.classList.add("issuePersonContainer"),c.appendChild(i),c.appendChild(r),n.appendChild(l),n.appendChild(o),n.appendChild(s),n.appendChild(c),a.push(n)}),a)},this.__assemblerType2=function(){},this.__assemblerType3=function(){},this.__createCard=function(e,n,t){var d=document.createElement("div");d.id=n.id+"-card",d.dataset.data=JSON.stringify(t),d.classList.add("kanbansys-style-item","kanbansys-style-"+a.config.structre.defaultAssemblerType,"kanbansys-event-card");var s=document.createElement("div");return s.classList.add("kanbansys-user-style"),s.appendChild(n),d.appendChild(s),d},this.__createAddButton=function(e){var a=document.createElement("div");a.classList.add("kanbansys-ui-add");var n=document.createElement("span"),t=document.createElement("span");return n.classList.add("kanbansys-ui-add-line0"),n.classList.add("kanbansys-ui-add-line"),t.classList.add("kanbansys-ui-add-line1"),t.classList.add("kanbansys-ui-add-line"),a.appendChild(n),a.appendChild(t),a.addEventListener("click",e),a},this.__createMenu=function(e){var n=document.createElement("div");n.classList.add("kanbansys-ui-menu"),n.id=a.config.kanbanId+"-menu-button"+a.menus_num;var t=document.createElement("span"),d=document.createElement("span"),s=document.createElement("span");t.classList.add("kanbansys-ui-menu-dot"),d.classList.add("kanbansys-ui-menu-dot"),s.classList.add("kanbansys-ui-menu-dot"),t.classList.add("kanbansys-ui-menu-dot0"),d.classList.add("kanbansys-ui-menu-dot1"),s.classList.add("kanbansys-ui-menu-dot2"),n.appendChild(t),n.appendChild(d),n.appendChild(s);var r=document.createElement("div");r.classList.add("kanbansys-ui-menu-content"),r.classList.add("kanbansys-ui-display-none");var i=n.id;return r.id=i+"-content",n.addEventListener("click",function(){id=i+"-content";let e=document.getElementById(id);void 0!==e&&null!==e&&(e.classList.contains("kanbansys-ui-display-none")?e.classList.remove("kanbansys-ui-display-none"):e.classList.add("kanbansys-ui-display-none"))}),Object.keys(e).forEach(function(a){var n=document.createElement("div");n.innerHTML=a,n.classList.add("kanbansys-ui-menu-title"),r.appendChild(n),Object.keys(e[a]).forEach(function(n){var t=document.createElement("div");t.classList.add("kanbansys-ui-menu-menus"),t.innerHTML=n,t.addEventListener(e[a][n].Event,e[a][n].Handler),r.appendChild(t)})}),n.appendChild(r),a.menus.push(n),a.menus_num=a.menus_num+1,n},this.__assembleBoardHeader=function(e,n,t){var d=document.createElement("div");d.classList.add("kanbansys-style-kanban-header");var s=document.createElement("div");s.classList.add("kanbansys-style-kanban-header-title"),s.innerHTML=n,s.id=e+"-title";var r=document.createElement("div");r.classList.add("kanbansys-style-kanban-header-num"),r.innerHTML=void 0!==t?t:0,r.id=e+"-num";var i=e,o=a.__createMenu({Basic:{"Edit baord name":{Event:"click",Handler:function(e){a.editBoardNameButtonDidPush(e,i),a.redraw()}},Delete:{Event:"click",Handler:function(e){console.log("Handler"),a.deleteButtonDidPush(e,i),a.removeBoard(i),a.redraw()}}}}),l=a.__createAddButton(function(e){console.log(i),a.addCardButtonDidPush(event,i)});return d.appendChild(s),d.appendChild(r),d.appendChild(o),d.appendChild(l),d},this.__createBoard=function(e){name=e.BoardName,id=e.BoardID,con=e.Contents,num=con.length;var n=a.__assembleBoardHeader(id,name,num),d=document.createElement("div");d.id=id,d.classList.add("kanbansys-style-kanban"),d.appendChild(n);var s=document.createElement("div");s.classList.add("kanbansys-style-kanban-body"),s.id=id+"-board",t=a.config.structre.defaultAssemblerType;var r=[];"simple"==t?r=a.__assemblerType0(con):"issue"==t?r=a.__assemblerType1(con):"image"==t?r=a.__assemblerType2(con):"simpleLink"==t?r=a.__assemblerType3(con):"issueLink"==t?r=a.__assemblerType4(con):"imageLink"==t?r=a.__assemblerType5(con):null!==originalAssembler?r=a.originalAssembler(con):console.log("[ERROR] originalAssembler was not seted.");var i=0;return r.forEach(e=>{var n=a.__createCard(id,e,con[i]);i++,s.appendChild(n)}),d.appendChild(s),d},this.updateFromServer=function(){},this.sendToServer=function(){},this.redraw=function(){a.config.server.autoUpload&&a.sendToServer();let e=document.getElementById(a.config.kanbanId),n=e.scrollLeft;e.remove(),a.draw(),document.getElementById(a.config.kanbanId).scrollLeft=n},this.generateMenuUI=function(e){return a.__createMenu(e)},this.removeCard=function(e){boardID=a.__getBoardIDFromCardID(e),cardID=e,a.__deleteData(boardID,cardID),a.redraw()},this.removeBoard=function(e){console.log("remove");let n=a.kanbanData;var t=-1;for(let a=0;a<n.length;a++)if(console.log(e,n[a].BoardID),e==n[a].BoardID){t=a;break}-1!=t&&(a.kanbanData.splice(t,1),a.redraw())},this.__getBoardIDFromCardID=function(e){let n=a.kanbanData;for(let a=0;a<n.length;a++){let t=n[a].Contents;for(let d=0;d<t.length;d++)if(t[d]==e)return n[a].BoardID}},this.setTheme=function(e){a.theme=e,a.redraw()},this.addCard=function(e,n){a.kanbanDataOld=a.kanbanData;var t=a.kanbanData;len=a.kanbanData.length;for(let d=0;d<len;d++)if(t[d].BoardID==e)return a.kanbanData[d].Contents.push(n),void a.redraw()},this.addBoard=function(e,n,t){a.kanbanDataOld=a.kanbanData,a.kanbanData.push({BoardName:e,BoardID:n,Contents:t}),a.redraw()},this.__addDataTop=function(e,n){a.kanbanData.forEach(a=>{if(a.BoardID==e)return console.log("add top",e),void a.Contents.unshift(n)})},this.__addDataBottom=function(e,n){a.kanbanData.forEach(a=>{if(a.BoardID==e)return console.log("add bottom",e),void a.Contents.push(n)})},this.__calcHeightPosition=function(e){return e.offsetTop+e.clientHeight/2},this.__calcAllHeightPostion=function(e){a.kanbanPosition=[];for(let t=0;t<e.length;t++){let d=e[t],s=d.Contents;var n=[];for(let e=0;e<s.length;e++){let t=document.getElementById(s[e].id),d=a.__calcHeightPosition(t);n.push({id:t.id,pos:d})}a.kanbanPosition.push({BoardID:d.BoardID,ContentsPosition:n})}return a.kanbanPosition},this.__calcInsertIndex=function(e,n){var t=a.__getBoardData();console.log(t);var d=a.__calcAllHeightPostion(t),s=document.getElementById(a.config.kanbanId).offsetTop,r=null,i=!1;for(let t=0;t<d.length;t++){if(d[t].BoardID!==n)continue;let c=d[t].ContentsPosition;for(let n=0;n<c.length;n++){c[n].id;var o=c[n].pos,l=e.clientY-a.y+a.h/2;if(s<l&&o>l){r=c[n].id,i=!1;break}r=c[n].id,i=!0,s=o}}return console.log(i?"after":"before",r),{boardID:n,cardID:r,isAfter:i}},this.__getBoardData=function(){var e=document.getElementById(a.config.kanbanId);if(null!==e&&void 0!==e){var n=[],t=document.querySelectorAll("#"+a.config.kanbanId+" .kanbansys-event-board");for(let e=0;e<t.length;e++){var d=document.querySelectorAll("#"+t[e].id+"-board .kanbansys-event-card");d=[].slice.call(d);var s=[];for(let e=0;e<d.length;e++)s.push(JSON.parse(d[e].dataset.data));n.push({BoardID:t[e].id,BoardName:document.getElementById(t[e].id+"-title").innerHTML,Contents:s})}return n}return null},this.__searchData=function(e,n){console.log(e,n);var t=0,d=0;len0=a.kanbanData.length;for(let e=0;e<len0;e++){data=a.kanbanData[e],len=data.Contents.length;for(let a=0;a<len;a++)if(n==data.Contents[a].id+"-card"){d=a,t=e;break}}return{boardIndex:t,cardIndex:d}},this.__getBoardIDFromEvent=function(e){console.log(e);var a=e.path||e.composedPath&&e.composedPath();for(let e=0;e<a.length-2;e++)if(a[e].classList.contains("kanbansys-event-board"))return a[e].id},this.__addDataAfter=function(e,n,t){var d=a.__searchData(e,n);console.log("add after",d),a.kanbanData[d.boardIndex].Contents.splice(d.cardIndex+1,0,t)},this.__addDataBefore=function(e,n,t){var d=a.__searchData(e,n);console.log("add before",d),a.kanbanData[d.boardIndex].Contents.splice(d.cardIndex,0,t)},this.__deleteData=function(e,n){var t=a.__searchData(e,n);console.log("delete",t),a.kanbanData[t.boardIndex].Contents.splice(t.cardIndex,1)},this.__dragFisrt=function(e){e.dataTransfer.effectAllowed="move",a.x=e.clientX-this.offsetLeft,a.y=e.clientY-this.offsetTop,a.h=this.clientHeight,this.clientHeight=0,a.dragTargetElem=this,a.dragStartBoard=null;var n=e.path||e.composedPath&&e.composedPath();for(let e=0;e<n.length-2;e++)if(n[e].classList.contains("kanbansys-event-board")){a.dragStartBoard=n[e];break}a.dragTargetElemClone=this.cloneNode(!0),a.dragTargetElemClone.id="kanbansys-tmp00",a.dragTargetElemClone.classList.remove("kanbansys-event-card"),a.dragTargetElemClone.classList.add("kanbansys-event-tmp-insert"),a.dragTargetElem.classList.add("kanbansys-event-dragging")},this.__dragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",null!=a.timerId&&window.clearTimeout(a.timerId),a.timerId=window.setTimeout(function(){a.dragTargetElem.classList.contains("kanbansys-event-dragging")&&a.dragTargetElem.classList.remove("kanbansys-event-dragging"),a.dragTargetElem.classList.contains("kanbansys-event-dragging-none")&&a.dragTargetElem.classList.remove("kanbansys-event-dragging-none");let e=document.getElementById("kanbansys-tmp00");void 0!==e&&null!==e&&e.remove()},1e3),boardID=a.__getBoardIDFromEvent(e);let n=a.__calcInsertIndex(e,boardID);if(a.dragTargetElem.classList.add("kanbansys-event-dragging-none"),null!==n.cardID){cardID=n.cardID+"-card";let e=document.getElementById(cardID);n.isAfter?e.after(a.dragTargetElemClone):e.before(a.dragTargetElemClone)}else{document.getElementById(boardID+"-board").appendChild(a.dragTargetElemClone)}},this.__mouseUp=function(e){},this.__dragEnd=function(e){console.log("Drop"),e.preventDefault(),e.stopPropagation(),boardID=a.__getBoardIDFromEvent(e);let n=a.__calcInsertIndex(e,boardID);cardID=n.cardID+"-card",content=JSON.parse(a.dragTargetElem.dataset.data),void 0!==a.dragTargetElem&&null!==a.dragTargetElem&&void 0!==a.dragStartBoard&&null!==a.dragStartBoard?a.__deleteData(a.dragStartBoard.id,a.dragTargetElem.id):console.log("[ERROR] Failed to delete drag element from data."),null!==n.cardID?n.isAfter?a.__addDataAfter(n.boardID,cardID,content):a.__addDataBefore(n.boardID,cardID,content):a.__addDataTop(n.boardID,content),a.redraw()},this.__dndRegs=function(){for(var e=document.getElementsByClassName("kanbansys-style-item"),n=0;n<e.length;n++)e[n].draggable="true",e[n].addEventListener("dragstart",a.__dragFisrt,!1);var t=document.getElementsByClassName("kanbansys-style-kanban-body");for(n=0;n<t.length;n++)t[n].draggable="false",t[n].addEventListener("dragover",a.__dragOver,!1),t[n].addEventListener("drop",a.__dragEnd,!1);for(t=document.getElementsByClassName("kanbansys-style-kanban"),n=0;n<t.length;n++)t[n].draggable="false",t[n].addEventListener("dragover",a.__dragOver,!1),t[n].addEventListener("drop",a.__dragEnd,!1);document.getElementsByTagName("html")[0].addEventListener("dragover",function(e){e.preventDefault()}),document.getElementsByTagName("html")[0].addEventListener("mouseup",a.__mouseUp,!1)},this.draw=function(){var e=document.getElementById(a.config.targetElementId);if(void 0!==e&&null!==e){var n=document.createElement("div");n.id=a.config.kanbanId,"dark"==a.theme?n.classList.add("kanbansys-theme-dark"):n.classList.add("kanbansys-theme-light"),n.classList.add("kanbansys-style-kanban-area");let d=a.kanbanData.length;for(let e=0;e<d;e++){c=a.kanbanData;var t=a.__createBoard(c[e]);e<d-1&&t.classList.add("kanbansys-style-right-margin-10"),t.classList.add("kanbansys-event-board"),n.appendChild(t)}e.appendChild(n)}a.__dndRegs()},a.kanbanData=a.config.content,a.kanbanDataOld=a.config.content,a.kanbanPosition=[],a.timerId=null,this.theme=a.config.defaultUI.theme,this.draw(),console.log(a.__getBoardData())}}()},{}]},{},[1]);